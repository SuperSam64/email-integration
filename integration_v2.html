<html>
  <head>
    <title>V2</title>
    <link href="style.css" rel="stylesheet">
    <link href="https://integrations.missiveapp.com/missive.css" rel="stylesheet">
    <script src="https://integrations.missiveapp.com/missive.js"></script>
    <script src="script.js"></script>
  </head>
  <body style="width:96%;height:96%;margin:auto">
    <div class="column-vertical column-center margin section align-center" style="margin-top:8px;margin-bottom:8px">
			<!---------------------------  [[  VERSION  ]]  ------------------------------>
			<span class="button-link column padding" id="reload-button">Version 1.31</span>
			<!---------------------------------------------------------------------------->
      <!--
        - get current convo
        - get previous convo
        - get current message
        - get replied status
        - get labels
        - get current message sender
        - get current message to
        - determine if there is a draft?
        - get current convo message count
        - get current convo subject
        - get current message subject
        - determine if last message was sent or received
        - check for spefic label  checklabel(label)
        - has attachments?
        - check for contact
        - swap emails
        - assign drafts
        - function to do all starting operations
        - create task
        - show form
        - link within extension
        - link to other extension
        - link outside of extension
        - assign label
      -->
		</div>
    <!-------------------------- BUTTON -------------------------------------->
    <span class="button column padding testButton" id="button1">Click me</span>
    <!------------------------------------------------------------------------>
    <!------------------------- TEXT BOX -------------------------->
    <div class="textFrame column-vertical section"><div id="title1">
        <div class="textTitle">
          Title
        </div>
        <div id="body1" class="textBody">
          Here is some text
        </div>
      </div>
    </div>
    <!------------------------------------------------------------->
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <script type="text/javascript">
      //---- VARIABLES ----
      var currentConversation;
      var currentMessage;
      //-------------------
      //------- WHEN CONVERSATION CHANGES ---------
      Missive.on('change:conversations', (ids) => {
				Missive.fetchConversations(ids).then((conversations) => {		
					currentConversation = conversations[0];
				})
			})
      Missive.on('change:messages', (ids) => {
				Missive.fetchMessages(ids).then((messages) => {		
					currentMessage = currentConversation.messages[currentConversation.messages_count];
				})
			})
      //------- WHEN CONVERSATION CHANGES ---------



      $("#title1").click(function () { 
        body1Reset();
      });
      $("#body1").click(function () { 
        body1Reset();
      });
      $("#button1").click(function () { 
        body1Click();
      });
    </script>
</body>
</html>

<html>
	<head>
		<title>Filters Fast</title>
		<script src="https://integrations.missiveapp.com/missive.js"></script>
		<link href="https://integrations.missiveapp.com/missive.css" rel="stylesheet">
	</head>
	<body>
		<table class="section columns-center margin">
			<tr class="section columns-center">
				<td width="120px"><div id="checkmark-text">Chat request 7</div></td>
				<td><input type="checkbox" class="checkmark" id="check-toggle"></input></td>
			</tr>
			<tr class="section columns-center">
				<td width="120px"><div id="switch-text" class="columns align-right"></div></td>
				<td><input type="checkbox" class="switch columns" id="check-switch"></input></td>
			</tr>
			<tr class="section columns-center">
				<td>
					<span class="button" id="new-message">New Message</span>
				</td>
			</tr>
			<tr class="section columns-center">
				<td>
					<span class="button" id="search">Search</span>
				</td>
			</tr>
		</table>
		<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
		<script type="text/javascript">
			var switchOn = "Switch is on V29";
			var switchOff = "Switch is off V29";
			/*   button to make a new message and assign it to myself
   			$('#new-message').click(function () { 
				Missive.compose();
				Missive.addAssignees("5c21049b-5a49-476c-813e-dfbf5285907d");
			}); */
			$('#search').click(function () { 
				Missive.search("12345678");
			});
			$('#check-toggle').change(function() {
   				if(this.checked){
					Missive.addLabels("32cb35ef-c362-411d-97b5-0d0bb5366d5c");
				}
				if(!this.checked){
					Missive.removeLabels("32cb35ef-c362-411d-97b5-0d0bb5366d5c");
				}
			});
			$( window ).on( "load", function() {
				$('#switch-text').text(switchOff);
			})
			$("#check-switch").click(function () {
				$('#switch-text').text(function(i, text){
          			return text === switchOff ? switchOn : switchOff;
      				})
   			});

			/* Removes chatbot label when going back to a conversation
			Missive.on('change:conversations', (ids) => {
				Missive.removeLabels("32cb35ef-c362-411d-97b5-0d0bb5366d5c");
			})*/			
		</script>
	</body>
</html>

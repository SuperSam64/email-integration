<html>
	<head>
		<title>Filters Fast</title>
		<script src="https://integrations.missiveapp.com/missive.js"></script>
		<link href="https://integrations.missiveapp.com/missive.css" rel="stylesheet">
	</head>
	<body style="height:90%">
	

				<!-- 
					---make "Name" first and last name
					---add avatar
					---check other user avatar to see what shows when one isn't present
						---if needed, make a placeholder avatar (use missive CSS default)
					---make a table, with avatar on the left, name on the top right, title on the bottom right
					---make both parts show on load
					test a CCA specific item
					test a CRM specific item
					test toggling between 2 views, "master" has toggle to set layout to either CRM or CCA, but neither should take away the toggle
					only show "version" for master (can be on same line as toggle, not directly next to it)
					set CCA status based on team?
				-->
		
			<div class="column-vertical column-center margin section align-center">
				<table style="margin-left: auto;margin-right:auto; width:0.1%; white-space:nowrap;">
					<tr>
						<table style="width:0.1%; white-space: nowrap; margin-left:auto; margin-right:auto">
							<td class="padding-small">
							<img id="avatar" src="https://missive.imgix.net/818390b9-424d-4-82ed-af180e94e621%2Favatar.jpg" style="border:2px solid white; box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.5);display:block; height:48px; border-radius:24px">
								<!--"https://missive.imgix.net/818390b9-424d-4049-82ed-af180e94e621%2Favatar.jpg" style="box-shadow: 0px 0px 4px 2px rgb(255, 255, 255); border:4px solid rgb(0, 255, 13); max-height:48px; border-radius:24px"></span>-->
							</td>
							<td>
								<table style="width:0.1%; white-space: nowrap;">	
									<tr style="width:0.1%; white-space: nowrap;">
										<td style="width:0.1%; white-space: nowrap;">
											<span id="name" class="text-xlarge"></span>
										</td>
									</tr>				
									<tr>
										<td style="width:0.1%; white-space: nowrap;">
											<span id="layout" class="text-small text-c"><span>
										</td>
									</tr>
								</table>
							</td>
						</table>
					</tr>
				<!--<tr></tr> style="column-center margin align-center">
					<td style="width:0.1%; white-space: nowrap;">Version 22.1</td>
				</tr>-->
			</table>
		</div>
		<div class="column-vertical column-center margin section align-center">
			<span class="button-link column padding">Version 25.3</span>
		</div>
		<div class="column-vertical column-center margin section align-center">
			<span class="button-link column padding" id="reload-button">Reload</span>
		</div>
		<div class="column-vertical margin section">
			<!-- individual table for row separates left from right, while also still allowing for "section" -->
			<table>
				<tr>
					<td><span class="button column padding" id="get-subject">Get M Subject</span></td>
					<td><span class="columnn" id="subject-text" style="word-break: break-all">[RESULT]</span></td>
				</tr>
			</table>
		</div>
		<div class="column-vertical margin section">
			<!-- individual table for row separates left from right, while also still allowing for "section" -->
			<table>
				<tr>
					<td><span class="button column padding" id="get-cSubject">Get C Subject</span></td>
					<td><span class="columnn" id="cSubject-text" style="word-break: break-all">[RESULT]</span></td>
				</tr>
			</table>
		</div>
		<div class="column-vertical margin section">
			<table>
				<tr>
					<td><span class="button column padding" id="get-labels">Get Labels</span></td>
					<td><span class="columnn" id="labels-text" style="word-break: break-all">[RESULT]</span></td>
				</tr>
			</table>
		</div>
		<div class="column-vertical margin section">
			<table>
				<tr>
					<td><span class="button column padding" id="get-replyto">Get Reply Email</span></td>
					<td><span class="columnn" id="replyto-text" style="word-break: break-all">[RESULT]</span></td>
				</tr>
			</table>
		</div>
		<div class="column-vertical margin section">
			<table>
				<tr>
					<td><span class="button column padding" id="create-task">Create a task</span></td>
					<td><span class="columnn" id="task-text" style="word-break: break-all">[RESULT]</span></td>
				</tr>
			</table>
		</div>
		<div class="column-vertical margin section">
			<table>
				<tr>
					<td><span class="button column padding" id="get-msgcount">Get Msg Count</span></td>
					<td><span class="columnn" id="msgcount-text" style="word-break: break-all">[RESULT]</span></td>
				</tr>
			</table>
		</div>	
		<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
		<script type="text/javascript">
			//======== create a function that can be reused as needed ========
			var currentUser;
			var profileType = "CCA" //CCA, CRM, master
			function getSubject(some_param){
  				//======== parameters go here. this one does nothing, but serves as a placeholder ========
				var x = some_param; // this is never used
				//======== return the end result ========
				return "Get message subject (function not defined)";
			}
			$(document).ready((ids) => {Missive.fetchUsers().then((users) => {
					$(users).each(function(){
						if(this.me){
							currentUser = this;
							var fullName = currentUser.first_name + " " + currentUser.last_name;
							$("#name").text(fullName);
							$("#avatar").attr("src",currentUser.avatar_url)
						}
					});	
				})
				// show user's title
				var value;
				if (profileType == "master") {
    				value = "MASTER"
				} else if (profileType == "Client Relationship Manager"){
    				value = "Client Relationship Manager"
				} else {
					value = "Customer Care Advocate"
				}
				
				$("#layout").text(value);
				// if CCA show all CCA-specific items

				// if CRM show all CRM-specific items

				// if Master, show everything with a toggle to go between
			})
			function getUser() {
				return currentUser;
			}
			function getLabels() {
  				//======== no parameters this time ========
				return "Get active label(s) (function not defined)";
			}
			function getReplyTo() {
  				//======== no parameters this time ========
				return "Get reply to email address (function not defined)";
			}
			function createTask() {
  				//======== no parameters this time ========
				return "Create a task (function not defined)";
			}
			function getMsgCount() {
  				//======== no parameters this time ========
				return "Get number of messages in this thread (function not defined)";
			}
			//======== button to test that funciton works ========
			$("#get-subject").click(function () { 
				//======== run the function, optionally with parameters ========
				var value = getSubject("anything-goes-here");
				//======== write the value to the text next to the button to test that it works ========
				$("#subject-text").text(value);
			});
			//======== button to test that funciton works ========
			$("#get-cSubject").click(function () { 
				//======== run the function, no parameters ========
				var firstName = getUser().first_name;
				var lastName  = getUser().last_name;
				var fullName = firstName + " " + lastName;
				$("#name").text(fullName);
			});
			$("#get-labels").click(function () { 
				//======== run the function, no parameters ========
				var value = getLabels();
				$("#labels-text").text(value);
			});
			$("#get-replyto").click(function () { 
				//======== run the function, no parameters ========
				var value = getReplyTo();
				$("#replyto-text").text(value);
			});
			$("#create-task").click(function () { 
				var value = createTask();
				$("#task-text").text(value);
			});
			$("#get-msgcount").click(function () { 
				var value = getMsgCount();
				$("#msgcount-text").text(value);
			});
			$("#reload-button").click(function () { 
				Missive.reload();
			});

		</script>
	</body>
</html>